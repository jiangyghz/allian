
!function(a){function e(e){return a(e).hasClass("form-inline")?1:a(e).hasClass("form-horizontal")?2:0}a.fn.validation=function(t,r){return this.length?("object"==typeof t&&(r=t,t=null),this.each(function(){F=a.extend({},a.fn.validation.defaults,r),F.callback=t,a(this).attr("novalidate","novalidate"),u=e(this),l(this)})):void(r&&r.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."))},a.fn.valid=function(e,u,F){if(t)return!1;a("#validerrmsg").remove();var l,s,i;"object"==typeof e?(l=a(e),"string"==typeof u?(s=u,i=F):i=u):"string"==typeof e?(s=e,i=F):i=e,t=!0;var o=!1;if(a("input:visible, textarea:visible,select:visible",this).each(function(){var e=a(this),t=e.parents(".form-group"),u=void 0==e.attr("check-type")?null:e.attr("check-type").split(" ");!t.hasClass("has-success")&&null!=u&&u.length>0&&(n(this,u)||(0==r&&(scrollTo(0,e[0].offsetTop-50),r=!0),o=!0))}),r=!1,t=!1,null!=s&&o){null==l&&(l=a("button:last[type=submit]"));for(var d=l.parent().attr("class").split(" "),c=!1,f=0;f<d.length;f++)if("btn-group"==d[f]){c=!0;break}c?l.parent().before('<span id="validerrmsg" class="help-block" style="color: #FF0000;"><div class="alert alert-warning" role="alert" style="padding:10px;"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+s+"</div></span>"):l.before('<span id="validerrmsg" class="help-block" style="color: #FF0000;"><div class="alert alert-warning" role="alert" style="padding:10px;"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+s+"</div></span>")}return i&&i(o),!o},a.fn.validation.defaults={validRules:[{name:"required",validate:function(e){return""==a.trim(e)},defaultMsg:"请输入内容。"},{name:"number",validate:function(a){return!/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},defaultMsg:"请输入数字。"},{name:"mail",validate:function(a){return!/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},defaultMsg:"请输入邮箱地址。"},{name:"char",validate:function(a){return!/^[a-z\_\-A-Z]*$/.test(a)},defaultMsg:"请输入英文字符。"},{name:"chinese",validate:function(a){return!/^[\\S\\s]*[\u4e00-\u9fff]+[\\S\\s]*$/.test(a)},defaultMsg:"请输入汉字。"},{name:"url",validate:function(a){return!/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},defaultMsg:"请输入网址"},{name:"date",validate:function(a){return/Invalid|NaN/.test(new Date(a).toString())},defaultMsg:"日期格式XXXX-XX-XX。"},{name:"mobile",validate:function(a){return!/^0?(13[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|14[0-9]|19[0-9])[0-9]{8}$/.test(a)},defaultMsg:"请输入正确的手机号。"},{name: 'tel', validate: function(a) {return!/^\d{3,4}-?\d{7,9}$/i.test(a)}, defaultMsg: "请输入正确的电话号码。"}],reqmark:!0,callback:null,icon:!1};var t=!1,r=!1,u=0,F={},n=function(t,r){var u,n=a(t),l=!1,s="",o=n.attr("minlength")?n.attr("minlength"):null,d=n.attr("range")?n.attr("range"):null;for(i=0;i<r.length;i++){var c=!0,f=r[i];u=void 0==n.attr(f+"-message")?null:n.attr(f+"-message"),"!"==f.substr(0,1)&&(c=!1,f=f.substr(1,f.length-1));var p=F.validRules;for(j=0;j<p.length;j++){var h=p[j];if(f==h.name){var v;if(v=null!=n.attr("type")&&"checkbox"==n.attr("type")?n.is(":checked")?"true":"":n.val(),h.validate.call(t,v)==c){l=!0,s=null!=n.attr("type")&&"file"==n.attr("type").toLowerCase()?null==u?"请选择文件。":u:null==u?h.defaultMsg:u;break}}}if(l)break}if(o&&!l&&(l=n.val().length<o,!l||null!=u&&""!=s||(s="输入长度大于等于"+o)),a.inArray("number",r)>=0&&d&&!l){var D=d.split("~");if(2==D.length)l=parseFloat(n.val())<parseFloat(D[0])||parseFloat(n.val())>parseFloat(D[1]),!l||null!=u&&""!=s||(s="输入值在［"+D[0]+"~"+D[1]+"]之间。");else{var D=d.split(",");D.length>0&&(l=a.inArray(n.val(),D)<0,!l||null!=u&&""!=s||(s="输入值为"+d+"的其中一个。"))}}if(!l&&F.callback){var m={msg:"",err:l},g=a.ajaxSettings.async;a.ajaxSetup({async:!1}),F.callback(t,m),l=m.err,!l||null!=u&&""!=s?""!=m.msg&&(s=m.msg):s=m.msg,a.ajaxSetup({async:g})}var b=n.parents(".form-group");b.removeClass("has-error has-success"),b.addClass(0==l?"has-success":"has-error"),F.icon===!0&&(b.find(".form-control-feedback").remove(),b.addClass("has-feedback"));var y=n.parents("form");if(y){var x=e(y),k=0==l?"glyphicon-ok":"glyphicon-remove";0==x?(b.find("#valierr").remove(),n.after('<span class="help-block" id="valierr">'+s+"</span>"),F.icon===!0&&(0==n.find("option").length?n.after('<span class="glyphicon '+k+' form-control-feedback" aria-hidden="true"></span>'):n.after('<span class="glyphicon '+k+' form-control-feedback" aria-hidden="true" style="right: 25px;"></span>'))):1==x?(b.find("#valierr").remove(),n.after('<span class="help-block" id="valierr">'+s+"</span>"),F.icon===!0&&(0==n.find("option").length?n.after('<span class="glyphicon '+k+' form-control-feedback" aria-hidden="true"></span>'):n.after('<span class="glyphicon '+k+' form-control-feedback" aria-hidden="true" style="right: 25px;"></span>'))):2==x&&(b.find("#valierr").remove(),n.after('<span class="help-block" id="valierr">'+s+"</span>"),F.icon===!0&&(0==n.find("option").length?n.after('<span class="glyphicon '+k+' form-control-feedback" aria-hidden="true"></span>'):n.after('<span class="glyphicon '+k+' form-control-feedback" aria-hidden="true" style="right: 25px;"></span>')))}return!l},l=function(e){a(e).find("input:visible, textarea:visible,select:visible").each(function(){var e=a(this);e.on("blur",function(){valid=void 0==e.attr("check-type")?null:e.attr("check-type").split(" "),valid&&n(this,valid)})}),a(e).find("input[type='file']").each(function(){var e=a(this);e.on("change",function(){valid=void 0==e.attr("check-type")?null:e.attr("check-type").split(" "),valid&&n(this,valid)})}),1==F.reqmark&&(0==u?a(e).find(".form-group>label").each(function(){var e=a(this),t=e.parents(".form-group");t.removeClass("has-error has-success"),t.find("#autoreqmark").remove(),e.after('<span id="autoreqmark" style="color:#FF9966"> *</span>')}):1==u?a(e).find(".form-group>label").each(function(){var e=a(this),t=e.parents(".form-group").find("input:visible,select:visible,textarea:visible");if(valid=void 0==t.attr("check-type")?"":t.attr("check-type"),valid.indexOf("required")>-1){var r=e.parents(".form-group");r.removeClass("has-error has-success"),r.find("#autoreqmark").remove(),e.after('<span id="autoreqmark" style="color:#FF0000"> *</span>')}}):2==u&&a(e).find("input:visible, textarea:visible,select:visible").each(function(){var e=a(this),t=e.parents(".form-group");t.removeClass("has-error has-success"),t.find("#valierr").remove(),valid=void 0==e.attr("check-type")?null:e.attr("check-type").split(" "),valid&&a.inArray("required",valid)>=0&&e.parent().after('<span class="help-block" id="valierr" style="color:#FF9966">*</span>')})),a(e).find("input[type='reset'],button[type='reset']").each(function(){var t=a(this);t.on("click",function(){a(e).validation(),a("#validerrmsg").remove()})})}}(window.jQuery);